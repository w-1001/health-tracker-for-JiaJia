<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å˜‰å˜‰çš„å¥åº·è¿½è¸ªåŠ©æ‰‹</title>
    <style>
        body {
            font-family: 'å¾®è½¯é›…é»‘', Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f0f8ff;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }

        .input-group {
            margin-bottom: 25px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
        }

        h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }

        h3 {
            color: #3498db;
            margin-top: 0;
        }

        label {
            display: block;
            margin: 10px 0 5px;
            color: #34495e;
            font-weight: 500;
        }

        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            margin-bottom: 15px;
            box-sizing: border-box;
        }

        button {
            background-color: #3498db;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #2980b9;
        }

        .result {
            margin: 25px 0;
            padding: 20px;
            background-color: #e8f4f8;
            border-radius: 10px;
        }

        .motivation {
            margin: 25px 0;
            padding: 20px;
            background-color: #fff3d9;
            border-radius: 10px;
            text-align: center;
            font-size: 1.1em;
        }

        table {
            width: 100%;
            margin-top: 25px;
            border-collapse: collapse;
            background-color: white;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid #ecf0f1;
        }

        th {
            background-color: #3498db;
            color: white;
        }

        tr:hover {
            background-color: #f5fafa;
        }

        .delete-btn {
            background-color: #e74c3c;
            padding: 5px 10px;
            font-size: 0.9em;
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸ‹ï¸ å˜‰å˜‰çš„å¥åº·è¿½è¸ªåŠ©æ‰‹</h2>
        
        <!-- è¾“å…¥åŒºåŸŸ -->
        <div class="input-group">
            <h3>ğŸ½ï¸ é¥®é£Ÿè®°å½•</h3>
            <label>æ—©é¤çƒ­é‡ (kcal):</label>
            <input type="number" id="breakfast" min="0">
            
            <label>åˆé¤çƒ­é‡ (kcal):</label>
            <input type="number" id="lunch" min="0">
            
            <label>æ™šé¤çƒ­é‡ (kcal):</label>
            <input type="number" id="dinner" min="0">
        </div>

        <div class="input-group">
            <h3>ğŸƒ è¿åŠ¨è®°å½•</h3>
            <label>è¿åŠ¨æ¶ˆè€— (kcal):</label>
            <input type="number" id="exercise" min="0">
        </div>

        <div class="input-group">
            <h3>âš–ï¸ ä½“é‡è®°å½•</h3>
            <label>å½“å‰ä½“é‡ (kg):</label>
            <input type="number" id="weight" step="0.1" min="30">
        </div>

        <button onclick="saveRecord()">ä¿å­˜ä»Šæ—¥æ•°æ®</button>

        <!-- ç»“æœæ˜¾ç¤º -->
        <div class="result" id="result"></div>

        <!-- æ¿€åŠ±è¯­ -->
        <div class="motivation" id="motivation"></div>

        <!-- å†å²è®°å½• -->
        <h3>ğŸ“… å†å²è®°å½•</h3>
        <table id="recordTable">
            <thead>
                <tr>
                    <th>æ—¥æœŸ</th>
                    <th>æ€»æ‘„å…¥</th>
                    <th>æ€»æ¶ˆè€—</th>
                    <th>çƒ­é‡ç¼ºå£</th>
                    <th>ä½“é‡</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- æ•°æ®åŠ¨æ€æ’å…¥ -->
            </tbody>
        </table>
    </div>

    <script>
        // åˆå§‹åŒ–æ—¶åŠ è½½å­˜å‚¨çš„æ•°æ®
        let records = JSON.parse(localStorage.getItem('healthRecords')) || [];
        renderTable();

        function saveRecord() {
            // è·å–è¾“å…¥å€¼
            const inputs = {
                breakfast: parseFloat(document.getElementById('breakfast').value) || 0,
                lunch: parseFloat(document.getElementById('lunch').value) || 0,
                dinner: parseFloat(document.getElementById('dinner').value) || 0,
                exercise: parseFloat(document.getElementById('exercise').value) || 0,
                weight: parseFloat(document.getElementById('weight').value)
            };

            // è®¡ç®—æ•°æ®
            const totalIntake = inputs.breakfast + inputs.lunch + inputs.dinner;
            const totalBurn = 1400 + inputs.exercise;
            const deficit = totalBurn - totalIntake;
            const today = new Date().toLocaleDateString();

            // æ£€æŸ¥æ˜¯å¦å·²æœ‰å½“æ—¥è®°å½•
            const existingIndex = records.findIndex(r => r.date === today);
            if (existingIndex >= 0) {
                records[existingIndex] = { ...inputs, date: today, totalIntake, totalBurn, deficit };
            } else {
                records.push({ ...inputs, date: today, totalIntake, totalBurn, deficit });
            }

            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('healthRecords', JSON.stringify(records));
            
            // æ›´æ–°ç•Œé¢
            renderTable();
            showResult(deficit, inputs.weight);
            clearInputs();
        }

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            records.forEach((record, index) => {
                const row = `
                    <tr>
                        <td>${record.date}</td>
                        <td>${record.totalIntake}kcal</td>
                        <td>${record.totalBurn}kcal</td>
                        <td style="color: ${record.deficit >= 0 ? '#27ae60' : '#e74c3c'}">
                            ${record.deficit}kcal
                        </td>
                        <td>${record.weight ? record.weight.toFixed(1)+'kg' : '-'}</td>
                        <td>
                            <button class="delete-btn" onclick="deleteRecord(${index})">åˆ é™¤</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function deleteRecord(index) {
            records.splice(index, 1);
            localStorage.setItem('healthRecords', JSON.stringify(records));
            renderTable();
        }

        function showResult(deficit, weight) {
            // æ˜¾ç¤ºè®¡ç®—ç»“æœ
            const resultHTML = `
                <h4>ğŸ“Š ä»Šæ—¥æ•°æ®ç»Ÿè®¡</h4>
                <p>çƒ­é‡ç¼ºå£ï¼š<strong style="color: ${deficit >= 0 ? '#27ae60' : '#e74c3c'}">${deficit}kcal</strong></p>
                ${weight ? `<p>å½“å‰ä½“é‡ï¼š<strong>${weight.toFixed(1)}kg</strong></p>` : ''}
            `;
            document.getElementById('result').innerHTML = resultHTML;

            // æ˜¾ç¤ºæ¿€åŠ±è¯­
            const motivation = getMotivation(deficit);
            document.getElementById('motivation').innerHTML = motivation;
        }

        function getMotivation(deficit) {
            const messages = [
  // è¶…é¢å®Œæˆç³»åˆ—
  { condition: d => d >= 800, text: "ğŸ–ï¸ ä¿Šä¿Šå‹‹ç« æˆäºˆï¼ä»Šæ—¥æˆ˜ç»©å ªæ¯”ä¸“ä¸šè¿åŠ¨å‘˜ï¼", emoji: "ğŸ…"},
  { condition: d => d >= 600, text: "ğŸš€ çªç ´å¤§æ°”å±‚ï¼è¿™ä¸ªè®°å½•å¯ä»¥å»èˆªå¤©å±€å¤‡æ¡ˆäº†ï¼", emoji: "ğŸŒŒ"},
  { condition: d => d >= 500, text: "ğŸ”¥ çƒ­é‡ç¼ºå£ç‡ƒçƒ§ä¸­ï¼ä½ å¬è§è„‚è‚ªå“­æ³£çš„å£°éŸ³äº†å—ï¼Ÿ", emoji: "ğŸ’¦"},

  // æ¸¸æˆåŒ–æ¿€åŠ±
  { condition: d => d >= 400, text: "ğŸ® è¾¾æˆ'é»„é‡‘è‡ªå¾‹è€…'æˆå°±ï¼è·å¾—ä¿Šä¿Šç‚¹èµx10ï¼", emoji: "ğŸ•¹ï¸"},
  { condition: d => d >= 300, text: "ğŸ›¡ï¸ é˜²å¾¡æˆåŠŸï¼ä»Šæ—¥æˆåŠŸæŠµæŒ¡å¡è·¯é‡Œå…¥ä¾µï¼", emoji: "âš”ï¸"},
  { condition: d => d >= 200, text: "ğŸ° åŸå ¡å®ˆæŠ¤è€…ï¼ä½ çš„æ„å¿—åŠ›æ­£åœ¨å‡çº§é˜²å¾¡å¡”ï¼", emoji: "ğŸ›¡ï¸"},

  // è¯—æ„é¼“åŠ±
  { condition: d => d >= 100, text: "ğŸŒ¸ æ˜¥é£åé‡Œä¸å¦‚ä½ çš„åšæŒï¼", emoji: "ğŸ"},
  { condition: d => d > 0, text: "ğŸŒ  æ¯ç§¯ç´¯100å¤§å¡ï¼Œå°±ç¦»æ˜Ÿæ˜Ÿæ›´è¿‘ä¸€æ­¥", emoji: "ğŸŒŸ"},
  { condition: d => d > 0, text: "ğŸ» èº«ä½“æ­£åœ¨æ¼”å¥å¥åº·çš„äº¤å“ä¹", emoji: "ğŸ¶"},

  // è¶£å‘³åœºæ™¯
  { condition: d => d >= 0, text: "ğŸ± å¡è·¯é‡Œé€ƒè·‘çš„é€Ÿåº¦æ¯”çŒ«å’ªè¿˜å¿«ï¼", emoji: "ğŸ¾"},
  { condition: d => d >= 0, text: "ğŸ” æ±‰å ¡æ€ªå…½å·²è¢«å‡»é€€ï¼", emoji: "ğŸ‘¾"},
  { condition: d => d >= 0, text: "ğŸ§™â™‚ï¸ é­”æ³•ç”Ÿæ•ˆï¼è„‚è‚ªæ­£åœ¨å˜å½¢ä¸ºè‚Œè‚‰é“ ç”²", emoji: "âš¡"},

  // çŸ¥è¯†æ¢—
  { condition: d => d >= 0, text: "ğŸ“š æ ¹æ®ã€Šä¿Šä¿Šå®šå¾‹ã€‹ï¼Œä»Šæ—¥è¿›æ­¥ç³»æ•°âˆ", emoji: "ğŸ§ª"},
  { condition: d => d >= 0, text: "âš›ï¸ æ£€æµ‹åˆ°æ­£èƒ½é‡ç²’å­å¤§çˆ†å‘ï¼", emoji: "ğŸ”­"},
  { condition: d => d >= 0, text: "ğŸ¦¾ æœºæ¢°é£å‡è¿›åº¦+5%ï¼Œç»§ç»­å¼ºåŒ–ä¹‰ä½“ï¼", emoji: "ğŸ”‹"},

  // æš–å¿ƒå…³æ€€
  { condition: d => d >= 0, text: "â˜• è®°å¾—å–æ¸©æ°´ï¼Œä½ å€¼å¾—è¢«æ¸©æŸ”ä»¥å¾…", emoji: "ğŸ’§"},
  { condition: d => d >= 0, text: "ğŸŒ» åƒå‘æ—¥è‘µä¸€æ ·è¿½é€å¥åº·çš„é˜³å…‰å§", emoji: "â˜€ï¸"},
  { condition: d => d >= 0, text: "ğŸ§£ åŠªåŠ›å¾ˆé‡è¦ï¼Œä½†ä¹Ÿåˆ«å¿˜äº†å¥½å¥½ä¼‘æ¯", emoji: "ğŸŒ™"},

  // æ˜æ˜Ÿæ•™ç»ƒå£å»
  { condition: d => d >= 0, text: "ğŸ’¥ è¿™ä¸ªæ•°æ®å¤Ÿå½“æˆ‘çš„ç§æ•™å­¦å‘˜äº†ï¼", emoji: "ğŸ‹ï¸â™‚ï¸"},
  { condition: d => d >= 0, text: "ğŸ“¢ å…¨ä½“æ³¨æ„ï¼è¿™é‡Œæœ‰ä¸ªè‡ªå¾‹æ¨¡èŒƒç”Ÿï¼", emoji: "ğŸ‘¨ğŸ«"},
  { condition: d => d >= 0, text: "ğŸ¯ ç²¾å‡†åº¦æ»¡åˆ†ï¼æ˜å¤©ç»§ç»­ä¿æŒç‹™å‡»æ‰‹çŠ¶æ€", emoji: "ğŸ”«"},

  // åˆ›æ„æ¯”å–»
  { condition: d => d >= 0, text: "ğŸš¢ è„‚è‚ªæ³°å¦å°¼å…‹å·æ­£åœ¨æ²‰æ²¡ï¼", emoji: "ğŸŒŠ"},
  { condition: d => d >= 0, text: "ğŸ¨ ä½ ä»Šå¤©åˆ›ä½œäº†ä¸€å¹…å¥åº·ä¸»ä¹‰ç”»å·", emoji: "ğŸ–Œï¸"},
  { condition: d => d >= 0, text: "âŒ› æ—¶é—´ç®¡ç†å¤§å¸ˆéä½ è«å±ï¼", emoji: "â³"},

  // ç‰¹åˆ«æ—¥æœŸæé†’
  { condition: d => new Date().getMonth()===11 && d>=0, text: "ğŸ„ è¿™æ˜¯ç»™åœ£è¯è€äººçš„æœ€ä½³ç¤¼ç‰©ï¼", emoji: "ğŸ"},
  { condition: d => new Date().getMonth()===0 && d>=0, text: "ğŸ‡ æ–°å¹´è‡ªå¾‹ç¬¬ä¸€ç‚®å·²æ‰“å“ï¼", emoji: "ğŸ§¨"},
  { condition: d => d>=0 && d<100, text: "ğŸŒ± ä»Šå¤©æ˜¯æœªæ¥å¥åº·æ ‘çš„æ’­ç§æ—¥", emoji: "ğŸŒ³"},

  // è¿›é˜¶æç¤º
  { condition: d => d>=0, text: "ğŸ“Œ å°è´´å£«ï¼šå……è¶³ç¡çœ èƒ½æå‡ä»£è°¢ç‡å“¦", emoji: "ğŸ˜´"},
  { condition: d => d>=0, text: "ğŸ” å‘ç°éšè—ä»»åŠ¡ï¼šè¿ç»­ä¸‰å¤©è¾¾æ ‡è§£é”æˆå°±", emoji: "ğŸ—ï¸"},
  { condition: d => d>=0, text: "ğŸ§­ æ–¹å‘æ­£ç¡®ï¼æ­£åœ¨å¯¼èˆªå‘å¥åº·åæ ‡", emoji: "ğŸ“"},

  // æƒ…æ™¯åŒ–é¼“åŠ±
  { condition: d => d>=0, text: "ğŸ† é¢†å¥–å°å·²å°±ä½ï¼Œè¯·ä¿æŒå† å†›å§¿æ€", emoji: "ğŸ‘‘"},
  { condition: d => d>=0, text: "ğŸš´â™‚ï¸ éª‘è¡Œåœ¨å¥åº·å¤§é“ä¸Šï¼Œé£æ™¯ç‹¬å¥½", emoji: "ğŸŒ„"},
  { condition: d => d>=0, text: "ğŸ£ ä»Šæ—¥æˆåŠŸé’“èµ·å¥åº·ä¹‹é±¼ï¼", emoji: "ğŸŸ"},

  // å†·å¹½é»˜
  { condition: d => d<0, text: "ğŸ¤– ç³»ç»Ÿæ£€æµ‹åˆ°éœ€è¦å¥¶èŒ¶æ€¥æ•‘åŒ…ï¼Ÿ", emoji: "ğŸš‘"},
  { condition: d => d<0, text: "ğŸ“‰ è‚¡å¸‚æœ‰é£é™©ï¼Œä½†ä½ çš„æ›²çº¿ä¸€å®šä¼šåå¼¹ï¼", emoji: "ğŸ’¹"},
  { condition: d => d<0, text: "ğŸ¢ è¿‡å±±è½¦ä½“éªŒå¡å·²ä½¿ç”¨ï¼Œæ˜å¤©é‡å›å·…å³°", emoji: "ğŸ "},

  // æ–‡è‰ºå‘
  { condition: d => d>=0, text: "ğŸ“– ä»Šæ—¥ç¯‡ç« ï¼šå‹‡å£«æˆ˜èƒœå¡è·¯é‡Œæ¶é¾™", emoji: "ğŸ²"},
  { condition: d => d>=0, text: "ğŸ¬ è¿™æ˜¯å±äºä½ çš„åŠ±å¿—ç”µå½±ç‰‡æ®µ", emoji: "ğŸ¥"},
  { condition: d => d>=0, text: "ğŸ–‹ï¸ ç”¨æ±—æ°´ä¹¦å†™çš„èº«æç®¡ç†å°è¯´", emoji: "ğŸ““"},

  // ç§‘æŠ€æ„Ÿ
  { condition: d => d>=0, text: "ğŸ›°ï¸ å¥åº·å«æ˜Ÿè¿›å…¥é¢„å®šè½¨é“ï¼", emoji: "ğŸŒ"},
  { condition: d => d>=0, text: "ğŸ¤– æ£€æµ‹åˆ°è‡ªå¾‹å‹äººå·¥æ™ºèƒ½åœ¨çº¿", emoji: "ğŸ’»"},
  { condition: d => d>=0, text: "ğŸ”¬ å®éªŒå®¤æŠ¥å‘Šï¼šç”¨æˆ·æ„å¿—åŠ›æ ·æœ¬è¶…æ ‡", emoji: "ğŸ§«"},

  // å›½é™…åŒ–
  { condition: d => d>=0, text: "ğŸ—½ è‡ªç”±å¥³ç¥ä¸ºä½ ä¸¾èµ·äº†å¥åº·ç«ç‚¬", emoji: "ğŸ”¥"},
  { condition: d => d>=0, text: "ğŸ—¼ åŸƒè²å°”é“å¡”è§è¯ä½ çš„åšæŒ", emoji: "ğŸ‡«ğŸ‡·"},
  { condition: d => d>=0, text: "ğŸŒ ä»Šæ—¥è¾¾æˆå’Œé£çº§åˆ«çš„è‡ªå¾‹", emoji: "ğŸ£"},

  // ç‰¹åˆ«æˆå°±
  { condition: (_,w) => w<60, text: "ğŸ‘— å³å°†è§£é”å°ç äººç”Ÿï¼", emoji: "ğŸ‘ "},
  { condition: (_,w) => w<60, text: "ğŸ¦‹ ç ´èŒ§æˆè¶è¿›è¡Œæ—¶", emoji: "ğŸŒº"},
  { condition: (_,w) => w<60, text: "âš¡ é—ªç”µä¾ è®­ç»ƒè®¡åˆ’æ‰§è¡Œä¸­", emoji: "ğŸŒ©ï¸"},

  // å“²å­¦å‘
  { condition: d => d>=0, text: "ğŸŒŒ å®‡å®™æ­£åœ¨å›åº”ä½ çš„åŠªåŠ›", emoji: "ğŸ”­"},
  { condition: d => d>=0, text: "â³ æ—¶é—´çœ‹å¾—è§æ¯ä¸€ä»½åšæŒ", emoji: "ğŸ•°ï¸"},
  { condition: d => d>=0, text: "ğŸ’ ä½ æ­£åœ¨é›•ç¢è‡ªå·±çš„èº«ä½“è‰ºæœ¯å“", emoji: "ğŸ–¼ï¸"},

  // åº”æ€¥é¼“åŠ±
  { condition: d => d<0, text: "ğŸ§¯ å¯åŠ¨ç´§æ€¥é¼“åŠ±é¢„æ¡ˆï¼šæ˜å¤©åˆæ˜¯æ–°æˆ˜åœºï¼", emoji: "ğŸš’"},
  { condition: d => d<0, text: "ğŸ› ï¸ æ£€æµ‹åˆ°ç³»ç»Ÿè¯¯å·®ï¼Œè‡ªåŠ¨é‡ç½®ä¸ºç§¯ææ¨¡å¼", emoji: "ğŸ”§"},
  { condition: d => d<0, text: "ğŸŒ§ï¸ é›¨åå½©è™¹æ­£åœ¨ç”Ÿæˆä¸­...", emoji: "ğŸŒˆ"}
];
            
            const { text, emoji } = messages.find(m => m.condition(deficit)) || 
                { text: "ğŸ’¡ ä¿Šä¿Šè¯´ï¼šå¥åº·ç”Ÿæ´»è´µåœ¨åšæŒï¼", emoji: "â¤ï¸" };
            
            return `${emoji} ${text}`;
        }

        function clearInputs() {
            // æ¸…ç©ºè¾“å…¥æ¡†ï¼ˆä¿ç•™ä½“é‡ï¼‰
            ['breakfast', 'lunch', 'dinner', 'exercise'].forEach(id => {
                document.getElementById(id).value = '';
            });
        }
    </script>
</body>
</html>
